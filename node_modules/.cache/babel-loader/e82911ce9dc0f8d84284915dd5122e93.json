{"ast":null,"code":"import _regeneratorRuntime from\"/home/dev/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/WEB/lxp/lxp-test/lxp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/dev/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/WEB/lxp/lxp-test/lxp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/home/dev/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/WEB/lxp/lxp-test/lxp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{userApi}from\"../Api/api\";import{setIsFetching}from\"./commonReducer\";var SET_USER_DATA='SET_USER_DATA';var SET_IS_AUTH='SET_IS_AUTH';var initialState={user:[],isAuth:false};var userReducer=function userReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case SET_USER_DATA:{return _objectSpread(_objectSpread({},state),{},{user:action.user});}case SET_IS_AUTH:{return _objectSpread(_objectSpread({},state),{},{isAuth:action.isAuth});}default:return state;}};export var setUserData=function setUserData(user){return{type:SET_USER_DATA,user:user};};export var setIsAuth=function setIsAuth(isAuth){return{type:SET_IS_AUTH,isAuth:isAuth};};export var login=function login(email,password){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(setIsFetching(true));_context.prev=1;_context.next=4;return userApi.login(email,password);case 4:response=_context.sent;localStorage.setItem('usertoken',response.token);dispatch([setUserData(response.user),setIsAuth(true),setIsFetching(false)]);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);dispatch(setIsFetching(false));case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export default userReducer;","map":{"version":3,"sources":["/home/dev/Рабочий стол/WEB/lxp/lxp-test/lxp/src/Redux/userReducer.js"],"names":["userApi","setIsFetching","SET_USER_DATA","SET_IS_AUTH","initialState","user","isAuth","userReducer","state","action","type","setUserData","setIsAuth","login","email","password","dispatch","response","localStorage","setItem","token"],"mappings":"uoBAAA,OAASA,OAAT,KAAwB,YAAxB,CACA,OAASC,aAAT,KAA8B,iBAA9B,CAEA,GAAMC,CAAAA,aAAa,CAAG,eAAtB,CACA,GAAMC,CAAAA,WAAW,CAAG,aAApB,CAEA,GAAIC,CAAAA,YAAY,CAAG,CACfC,IAAI,CAAE,EADS,CAEfC,MAAM,CAAE,KAFO,CAAnB,CAKA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAkC,IAAjCC,CAAAA,KAAiC,2DAAzBJ,YAAyB,IAAXK,CAAAA,MAAW,2CAClD,OAAOA,MAAM,CAACC,IAAd,EACI,IAAKR,CAAAA,aAAL,CAAoB,CAChB,sCAAYM,KAAZ,MAAmBH,IAAI,CAAEI,MAAM,CAACJ,IAAhC,GACH,CACD,IAAKF,CAAAA,WAAL,CAAkB,CACd,sCAAYK,KAAZ,MAAmBF,MAAM,CAAEG,MAAM,CAACH,MAAlC,GACH,CACD,QACI,MAAOE,CAAAA,KAAP,CARR,CAUH,CAXD,CAaA,MAAO,IAAMG,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACN,IAAD,QAAW,CAClCK,IAAI,CAAER,aAD4B,CACbG,IAAI,CAAJA,IADa,CAAX,EAApB,CAIP,MAAO,IAAMO,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACN,MAAD,QAAa,CAClCI,IAAI,CAAEP,WAD4B,CACfG,MAAM,CAANA,MADe,CAAb,EAAlB,CAIP,MAAO,IAAMO,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACC,KAAD,CAAQC,QAAR,iGAAqB,iBAAOC,QAAP,+HACtCA,QAAQ,CAACf,aAAa,CAAC,IAAD,CAAd,CAAR,CADsC,sCAGbD,CAAAA,OAAO,CAACa,KAAR,CAAcC,KAAd,CAAqBC,QAArB,CAHa,QAG9BE,QAH8B,eAIlCC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAkCF,QAAQ,CAACG,KAA3C,EACAJ,QAAQ,CAAC,CAACL,WAAW,CAACM,QAAQ,CAACZ,IAAV,CAAZ,CAA6BO,SAAS,CAAC,IAAD,CAAtC,CAA8CX,aAAa,CAAC,KAAD,CAA3D,CAAD,CAAR,CALkC,+EAOlCe,QAAQ,CAACf,aAAa,CAAC,KAAD,CAAd,CAAR,CAPkC,oEAArB,gEAAd,CAYP,cAAeM,CAAAA,WAAf","sourcesContent":["import { userApi } from \"../Api/api\";\nimport { setIsFetching } from \"./commonReducer\";\n\nconst SET_USER_DATA = 'SET_USER_DATA';\nconst SET_IS_AUTH = 'SET_IS_AUTH';\n\nlet initialState = {\n    user: [],\n    isAuth: false\n}\n\nconst userReducer = (state = initialState, action) => {\n    switch(action.type){\n        case SET_USER_DATA: {\n            return { ...state, user: action.user }\n        }\n        case SET_IS_AUTH: {\n            return { ...state, isAuth: action.isAuth }\n        }\n        default:\n            return state;\n    }\n}\n\nexport const setUserData = (user) => ({\n    type: SET_USER_DATA, user\n});\n\nexport const setIsAuth = (isAuth) => ({\n    type: SET_IS_AUTH, isAuth\n});\n\nexport const login = (email, password) => async (dispatch) => {\n    dispatch(setIsFetching(true));\n    try{\n        let response = await userApi.login(email, password);\n        localStorage.setItem('usertoken', response.token);\n        dispatch([setUserData(response.user), setIsAuth(true), setIsFetching(false)]);\n    }catch(err){\n        dispatch(setIsFetching(false));\n    }\n}\n\n\nexport default userReducer;"]},"metadata":{},"sourceType":"module"}